# Express Chat Monorepo

**turboRepo + pnpm** ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±ëœ ì‹¤ì‹œê°„ ì±„íŒ… ëª¨ë…¸ë ˆí¬ì…ë‹ˆë‹¤. `apps/` í•˜ìœ„ì— ì—¬ëŸ¬ ì„œë²„Â·í´ë¼ì´ì–¸íŠ¸ê°€ ê³µì¡´í•˜ê³ , ê³µí†µ ì˜ì¡´ì„±ì„ ê³µìœ í•˜ë©´ì„œ ë¹ ë¥´ê²Œ ìƒˆë¡œìš´ ì¡°í•©ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœê·¼ì—ëŠ” **Express + Socket.IO** ì¡°í•©(`apps/express`)ì„ ì§‘ì¤‘ì ìœ¼ë¡œ ê°œì„ í–ˆê³ , ê´€ë ¨ ì‹¤í–‰ í”Œë¡œìš°ì™€ í™”ë©´ì„ ë³¸ ë¬¸ì„œì—ì„œ ì •ë¦¬í•©ë‹ˆë‹¤.

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```text
.
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ client1/        # Vite + Socket.IO Client
â”‚   â”œâ”€â”€ express/        # Express + Socket.IO ì„œë²„ (í˜„ì¬ ë©”ì¸)
â”‚   â””â”€â”€ server1/        # Node.js + Socket.IO ì„œë²„ ì˜ˆì œ
â”œâ”€â”€ public/img/         # ê³µìš© ìŠ¤í¬ë¦°ìƒ· ëª¨ìŒ
â”œâ”€â”€ package.json        # ë£¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ (ì˜ˆ: pnpm dev:express)
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ turbo.json
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ & ëª¨ë“ˆ

- **Monorepo ë„êµ¬**: pnpm workspaces, TurboRepo
- **ì„œë²„ (apps/express)**: Express 5, Socket.IO 4, Node.js
- **í´ë¼ì´ì–¸íŠ¸ (ì •ì  í…œí”Œë¦¿)**: HTML/CSS/Vanilla JS + Mustache í…œí”Œë¦¿
- **ìœ í‹¸**:
  - `apps/express/src/utils/users.js` : ì‚¬ìš©ì ì…Â·í‡´ì¥ ë° ì¤‘ë³µ ì²˜ë¦¬
  - `apps/express/src/utils/messages.js` : ì„œë²„ ê³µìš© ë©”ì‹œì§€ í¬ë§·

## ğŸš€ ì‹¤í–‰ ë°©ë²•

1. **ì˜ì¡´ì„± ì„¤ì¹˜**

   ```bash
   pnpm install
   ```

2. **Express ì„œë²„ ì‹¤í–‰**

   ```bash
   pnpm dev:express
   ```

   - ë£¨íŠ¸ `package.json`ì˜ `dev:express` ìŠ¤í¬ë¦½íŠ¸ê°€ `pnpm --filter @express-chat/express dev`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
   - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë‚´ë¶€(`apps/express/package.json`)ì˜ `dev` ìŠ¤í¬ë¦½íŠ¸ëŠ” `node index.js`ë¥¼ ì‹¤í–‰í•˜ë©°, `index.js`ëŠ” `src/index.js`ë¥¼ ë¶ˆëŸ¬ì™€ ì„œë²„ì™€ Socket.IOë¥¼ ê°™ì€ HTTP ì„œë²„ì—ì„œ êµ¬ë™í•©ë‹ˆë‹¤.

3. **ì ‘ì†**

   - ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8081` ì§„ì… â†’ ë‹‰ë„¤ì„Â·ë°© ì´ë¦„ ì…ë ¥ â†’ `ì…ì¥`.
   - ë™ì¼ ë°©ì— ë‹¤ë¥¸ ë¸Œë¼ìš°ì €/íƒ­ìœ¼ë¡œ ì¬ì ‘ì†í•˜ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‚¬ìš©ì ëª©ë¡ê³¼ ë©”ì‹œì§€ê°€ ë™ê¸°í™”ë©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- **ì…ì¥/í‡´ì¥ ë¸Œë¡œë“œìºìŠ¤íŠ¸**: `generateMessage` í—¬í¼ë¥¼ í†µí•´ Admin ë©”ì‹œì§€ ì¶œë ¥.
- **ìœ ì €ëª… ì¤‘ë³µ ê²€ì‚¬**: `addUser`ê°€ ê°™ì€ ë°© ë‚´ ì¤‘ë³µ ë‹‰ë„¤ì„ì„ ê±°ë¶€í•˜ê³  ì˜¤ë¥˜ ì½œë°± ë°˜í™˜.
- **ì‹¤ì‹œê°„ ë©”ì‹œì§€**: `sendMessage` ACKë¥¼ í™œìš©í•´ í´ë¼ì´ì–¸íŠ¸ í¼ ìƒíƒœë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì´ˆê¸°í™”.
- **ì‚¬ì´ë“œë°” ì¸ì›ìˆ˜ ê°±ì‹ **: `roomData` ì´ë²¤íŠ¸ë¡œ Mustache í…œí”Œë¦¿ì„ ì—…ë°ì´íŠ¸.

## ğŸ–¼ í™”ë©´ íë¦„

ë£¨íŠ¸ `public/img` ë””ë ‰í„°ë¦¬ì— ì €ì¥ëœ ìº¡ì²˜ë¥¼ ê·¸ëŒ€ë¡œ ì°¸ì¡°í•´ ì£¼ìš” ìƒíƒœë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

### 1. ìµœì´ˆ ë°© ìƒì„± (`public/img/express1-join.png`)
![Express Join](public/img/express1-join.png)

### 2. ì²« ë²ˆì§¸ ì…ì¥ì í™”ë©´ (`public/img/express1-chat1.png`)
![Express Chat 1](public/img/express1-chat1.png)

### 3. ì´ë¦„ ì¤‘ë³µ ê²½ê³  (`public/img/express1-idDuplication.png`)
![Express Duplicate](public/img/express1-idDuplication.png)

### 4. ë‘ ë²ˆì§¸ ì…ì¥ì í™”ë©´ (`public/img/express1-chat2.png`)
![Express Chat 2](public/img/express1-chat2.png)

### 5. ìœ ì € í‡´ì¥ ì•Œë¦¼ (`public/img/express1-leave.png`)
![Express Leave](public/img/express1-leave.png)

## ğŸ”Œ ê¸°íƒ€ ìŠ¤í¬ë¦½íŠ¸

- `pnpm dev` : TurboRepoë¥¼ í†µí•´ ë“±ë¡ëœ ëª¨ë“  ì•±ì˜ `dev` íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
- `pnpm build` / `pnpm lint` : ê° ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ `build`/`lint`ë¥¼ Turbo íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ í˜¸ì¶œ
- `pnpm dev:client1`, `pnpm dev:server1` : íŠ¹ì • ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë§Œ í•„í„°ë§í•´ì„œ ì‹¤í–‰

## ğŸ“ í™•ì¥ ê°€ì´ë“œ

1. `apps/` ì•„ë˜ ìƒˆ ë””ë ‰í„°ë¦¬ ìƒì„± (`client2`, `server2` ë“±).
2. í•„ìš”í•œ `package.json`, ì†ŒìŠ¤, ì •ì  ìì‚°ì„ ë³µì‚¬/ìˆ˜ì •.
3. ë£¨íŠ¸ `package.json` `scripts`ì— `dev:<name>` ë“± ìƒˆ ëª…ë ¹ ì¶”ê°€.
4. ê³µìš© ëª¨ë“ˆ(ìœ ì €/ë©”ì‹œì§€ ë¡œì§ ë“±)ì´ ë§ì•„ì§€ë©´ `packages/` í•˜ìœ„ì— ê³µìœ  íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ê³  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.

Express ì˜ˆì œì²˜ëŸ¼ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ê°€ ë¶„ë¦¬ë¼ ìˆì–´ë„, ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ì™€ ì—ì…‹ì„ ì¬ì‚¬ìš©í•˜ë©´ì„œ ë‹¤ì–‘í•œ ì¡°í•©ì„ ë¹ ë¥´ê²Œ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ê¸°ëŠ¥ì„ `apps/*` ì•ˆì— ì¶”ê°€í•˜ê³  ë£¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì—°ê²°í•´ ë³´ì„¸ìš”!
